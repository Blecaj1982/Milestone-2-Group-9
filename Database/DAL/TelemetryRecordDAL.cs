using System;

namespace FDMS.DAL
{
    /// <summary>
    /// Simple object representing Telemetry data for an aircraft. Used for
    /// transferring Telemetry information into and out of a database. One if
    /// constructors is for use by the FdmsDatabase and another is for use by
    /// client code
    /// </summary>
    public class TelemetryRecordDal
    {
        public string AircraftTailNum { get; set; }
        public DateTime Timestamp { get; set; } // Time that the Telemetry data was generated by the aicraft
        public DateTime EntryTimestamp { get; set; } // Time at which the Telemetry data was inserted into the FDMS database
        public float Accel_X { get; set; }
        public float Accel_Y { get; set; }
        public float Accel_Z { get; set; }
        public float Weight { get; set; }
        public float Altitude { get; set; }
        public float Pitch { get; set; }
        public float Bank { get; set; }

        public TelemetryRecordDal() { }

        /// <summary>
        /// Client code constructor for TelemetryRecordDAL. Lacks an EntryTimestamp parameter.
        /// </summary>
        public TelemetryRecordDal(string aircraftTailNum, DateTime timestamp, GForceParameters gForceParameters, AltitudeParameters altitudeParameters) 
        {
            AircraftTailNum = aircraftTailNum;
            Timestamp = timestamp;
            Accel_X = gForceParameters.Accel_X;
            Accel_Y = gForceParameters.Accel_Y; 
            Accel_Z = gForceParameters.Accel_Z;
            Weight = gForceParameters.Weight;
            Altitude = altitudeParameters.Altitude;
            Pitch = altitudeParameters.Pitch;
            Bank = altitudeParameters.Bank;
        }

        /// <summary>
        /// Database constructor for TelemetryRecordDAL. 
        /// </summary>
        public TelemetryRecordDal(string aircraftTailNum, DateTime timestamp, DateTime entryTimestamp, GForceParameters gForceParameters, AltitudeParameters altitudeParameters)
        {
            AircraftTailNum = aircraftTailNum;
            Timestamp = timestamp;
            EntryTimestamp = entryTimestamp;
            Accel_X = gForceParameters.Accel_X;
            Accel_Y = gForceParameters.Accel_Y; 
            Accel_Z = gForceParameters.Accel_Z;
            Weight = gForceParameters.Weight;
            Altitude = altitudeParameters.Altitude;
            Pitch = altitudeParameters.Pitch;
            Bank = altitudeParameters.Bank;
        }

        public override string ToString()
        {
            return $"{AircraftTailNum},{Timestamp},{Accel_X:N6},{Accel_Y:N6},{Accel_Z:N6},{Weight:N6},{Altitude:N6},{Pitch:N6},{Bank:N6}";
        }
    }

    public struct GForceParameters {
        private float accel_X;
        private float accel_Y;
        private float accel_Z;
        private float weight;

        public float Accel_X { get => accel_X; set => accel_X = value; }
        public float Accel_Y { get => accel_Y; set => accel_Y = value; }
        public float Accel_Z { get => accel_Z; set => accel_Z = value; }
        public float Weight { get => weight; set => weight = value; }

        public GForceParameters (float accelX, float accelY, float accelZ, float weight)
        {
            accel_X = accelX; 
            accel_Y = accelY;
            accel_Z = accelZ;
            this.weight = weight;
        }
    }

    public struct AltitudeParameters
    {
        private float altitude;
        private float pitch;
        private float bank;

        public float Altitude { get => altitude; set => altitude = value; }
        public float Pitch { get => pitch; set => pitch = value; }
        public float Bank { get => bank; set => bank = value; }

        public AltitudeParameters(float altitude, float pitch, float bank)
        {
            this.altitude = altitude;
            this.pitch = pitch;
            this.bank = bank;
        }
    }
}
